<style is="custom-style">
 div.channel{color:var(--primary-text-color);}
 div.channel{max-width:120px;max-height:60px;width:120px;height:60px;}
 div.channel{font-family:'NobbleeLight','Roboto',sans-serif!important;cursor:pointer;}
 div.channel{background:url('./images/static.png');line-height:60px;font-size:50px;position:relative;}
 div.channel{display:inline-block;margin:8px;border-radius:8px;border:2px solid var(--default-primary-color);}
 div.channel img{position:absolute;top:0px;left:0px;box-sizing:border-box;width:100%;height:100%;border-radius:6px;}
 @media screen and (max-width:640px){div.channel{width:98px;height:49px;line-height:52px;}}
</style>
<paper-dialog entry-animation="scale-up-animation" exit-animation="fade-out-animation" modal>
 <table class="holder" style="min-width:240px;"><tr><th colspan="100" nowrap>WATCH ON</th></tr></table>
 <div class="buttons">
  <paper-button onclick="zapChannel();" style="position:absolute;left:0px;" autofocus>TV</paper-button>
  <paper-button onclick="playChannel();">DEVICE</paper-button>
 </div>
</paper-dialog>
<center id="uiContainer" page="channels.html">
 LOADING
</center>
<script>
console.log("CHANNELS LOADED");
$("#uiContainer").empty();//CLEAN CONTAINER

$.getJSON(urls("channels"),function(channel_data){$.each(channel_data,function(k,json){
 var holder=$("<div/>").addClass("channel").text(json.zap).on("click",function(){
  $.dialog().zapid=json.zap;$.dialog().zapname=json.name;$.dialog().open();
 }),logo=$("<img/>").attr("src",urls("channel_logos")+json.zap);
  logo.attr("onerror","this.src='./images/space.png';");
 $("#uiContainer").append(holder.append(logo));
})}).error(function(){
 alert("ERROR CONNECTING");
});

function playChannel(){
 location.href=urls("play")+$.dialog().zapid;
 $.dialog().close();
}

function zapChannel(){
 $.get(urls("zap")+$.dialog().zapid,function(){
  $().toast({text:"PLAYING: "+$.dialog().zapname});
  $.dialog().close();
 });
}
</script>