<script type="text/javascript">
$.ajaxSetup({
 url:"https://script.google.com/macros/s/AKfycbz6uzzzZOL_Vw-z-2zRtgYwBMApe2dNvM_30BEpZqpLtjEjhxs/exec",
 type:"post",dataType:"jsonp",jsonpCallback:"update",statusCode:{404:function(){alert("page not found");}},
 xhrFields:{withCredentials:true},crossDomain:true,timeout:2000
});

function onLoad() {
      gapi.load('auth2,signin2', function() {
        var auth2 = gapi.auth2.init();
        auth2.then(function() {
          // Current values
          var isSignedIn = auth2.isSignedIn.get();
          var currentUser = auth2.currentUser.get();

          if (!isSignedIn) {
            // Rendering g-signin2 button.
            gapi.signin2.render('google-signin-button', {
              'onsuccess': 'onSignIn'  
            });
          }
        });
      });
    }

function onSignIn(googleUser){
 var profile=googleUser.getBasicProfile();
 console.log("Name: " + profile.getName());
 console.log("Image URL: " + profile.getImageUrl());
 console.log("Email: " + profile.getEmail());
 
 $.ajax({data:"user="+btoa(profile.getEmail())});
};

function onSignOut(){
 var profile=gapi.auth2.getAuthInstance();
  profile.signOut().then(function(){console.log('User signed out.');});
  profile.disconnect().then(function(){console.log('Disconected.');});
 return false;
}

function getDate(stamp){
 var today=new Date(stamp),dd=today.getDate();
 var mm=today.getMonth()+1,yyyy=today.getFullYear();
 if(dd<10){dd='0'+dd;}if(mm<10){mm='0'+mm;}
 //return dd+'/'+mm+'/'+yyyy;
 return dd+'/'+mm;
};

function getNumber(x,d){
 x=parseFloat(x).toFixed(d);
 return Number(x);
};
</script>
<style is="custom-style">
:root{
 --paper-tabs-height:48px;
 --paper-toolbar-height:59px;
 --primary-background-color:#3E3E3E;
 --paper-toolbar-sm-height:var(--paper-toolbar-height);
 --paper-input-container-input:{text-align:center;color:var(--primary-text-color);}
 --paper-input-container-label:{text-align:center;color:var(--default-primary-color);}
 --paper-toolbar-background:#E00421;--paper-toolbar-color:#FFFFFF; 
 --paper-drawer-background:#F0F0F0;--paper-drawer-color:#000000;
 --paper-tabs-background:#DCDCCC;--paper-tabs-color:#000000; 
}

paper-drawer-panel::shadow{
 --paper-drawer-panel-main-container:{
  -webkit-tap-highlight-color:rgba(255,255,255,0);
  background:var(--primary-background-color);
  color:var(--primary-text-color);
  -webkit-user-select:none;
  cursor:default;
 };
}

paper-card{width:100%;}
paper-item{cursor:pointer;}
google-chart{margin:auto;width:100%;}
paper-item{padding:0px 10px!important;}
paper-item iron-icon{margin-right:10px;}
paper-icon-item{padding:5px!important;height:48px;}
paper-spinner{width:75px;height:75px;margin-top:10px;}
div#mainContainer.paper-header-panel{overflow-y:scroll!important;}
body{-webkit-user-select:none;-moz-user-select:none;user-select:none;}

paper-card#drawer::shadow{border-radius:0px;}
paper-card#drawer::shadow div.title-text{top:0px;text-shadow:2px 2px 0px #FFFFFF;}

paper-toolbar#tabs::shadow paper-ripple{color:var(--paper-toolbar-background);opacity:0.4;}
paper-toolbar#tabs::shadow div#selectionBar{background:var(--paper-toolbar-background);height:4px;}
paper-toolbar#tabs::shadow{background:var(--paper-tabs-background);max-height:var(--paper-tabs-height);}
paper-toolbar#tabs::shadow div#topBar{height:var(--paper-tabs-height);max-height:var(--paper-tabs-height);color:var(--paper-tabs-color);}

paper-toolbar::shadow div#dropShadow{box-shadow:inset 0px 10px 6px -8px rgba(0, 0, 0, 0.4)!important;}

neon-animatable{text-align:center;}
neon-animatable paper-card{margin:10px auto;width:95%;max-width:800px;margin-bottom:20px;border-radius:10px;padding:5px;}
paper-menu, paper-card{background:var(--paper-drawer-background);color:var(--paper-drawer-color);}

div#toolbar-end{
 position:absolute;top:0px;right:-15px;
 background:var(--paper-toolbar-background);
 box-shadow:5px 5px 6px -3px rgba(0,0,0,0.4);z-index:10;
 border-bottom-left-radius:calc(var(--paper-toolbar-sm-height)/2);
 height:var(--paper-toolbar-sm-height);
 width:var(--paper-toolbar-sm-height);
}
div#tabs-end{
 position:absolute;top:0px;right:-20px;
 background:var(--paper-tabs-background);
 box-shadow:5px 5px 6px -3px rgba(0,0,0,0.4);z-index:0;
 border-bottom-left-radius:calc(var(--paper-tabs-height)/2);
 height:calc(var(--paper-tabs-height) + var(--paper-toolbar-sm-height));
 width:var(--paper-tabs-height);
}

div#___signin_0{width:113px!important;height:31px!important;}

paper-header-panel::shadow #mainContainer::-webkit-scrollbar{width:14px;}
paper-header-panel::shadow #mainContainer::-webkit-scrollbar-thumb{
 border:2px solid var(--primary-background-color);
 background-color:var(--paper-toolbar-background);
}*.hide{display:none;}
</style>
