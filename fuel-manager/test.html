<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
  </head>
  <body>
    <!--Add a button for the user to click to initiate auth sequence -->
    <button id="authorize-button" style="visibility:hidden;">Authorize</button>
    <div class="g-signin" data-onsuccess="onSignIn" data-theme="light"></div>
    <script type="text/javascript">
      function checkAuth(event){
        var requiredScopes="profile email";
        var clientId="147460070429-5svh32tvvv2tqpve7v9i9h11e93jb8fm.apps.googleusercontent.com";
        gapi.auth.authorize({client_id:clientId,scope:requiredScopes,immediate:!event},function(auth){
         var authorizeButton=document.getElementById('authorize-button');
         if(auth && !auth.error){
           authorizeButton.style.visibility = 'hidden';
           makeApiCall();
         }else{
           authorizeButton.style.visibility = '';
           authorizeButton.onclick = checkAuth;
         }
        });return false;
      };

      function makeApiCall(){
        gapi.client.load("plus","v1",function(){
         gapi.client.plus.people.get({"userId":"me"}).execute(function(resp){
            console.log(resp);
          });
        });
      };
    </script>
    <script src="https://apis.google.com/js/client.js?onload=checkAuth"></script>
    <div id="content"></div>
    <p>Retrieves your profile name using the Google Plus API.</p>
  </body>
</html>
