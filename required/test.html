
<!doctype html>
<html lang="en" data-framework="polymer">
<head>
 <meta charset="utf-8">
 <title>TESTING GUI</title>
 <meta name="language" content="english"/>
 <meta name="theme-color" content="#009C9C">
 <meta http-equiv="Cache-control" content="public"> 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

 <base href="http://aronfeerick.github.io/ee-tv/"/>

 <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
 <script type="text/javascript" src="../bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
 <script type="text/javascript" src="./images/jquery.plugins.js" name="Custom Plugins"></script> 
 <link rel="import" href="../bower_components/vulcanized-full.html" name="Polymer"/>
 <link rel="import" href="./images/main-style.css" name="Custom Styles"/> 
 
 <link rel="import" href="./custom/ee-channel.html"/>
 <link rel="manifest" href="./app-manifest.json"/>
</head>
<body unresolved>
<template is="dom-bind" id="ee-tv-gui">
 <paper-drawer-panel force-narrow id="page">
  <paper-material id="drawer" elevation="5" drawer>
   <img src="./images/logo.png" class="" alt="" title=""/>
   <paper-menu class="list" style="padding:0px;">
    <paper-item file="remote.html">Remote</paper-item>
    <paper-item file="channels.html">Channels</paper-item>
    <paper-item file="recordings.html">Recordings</paper-item>
    <paper-item>Play URL</paper-item>
   </paper-menu>
   <paper-progress max="100" class="green" indeterminate></paper-progress>
  </paper-material>
  <paper-header-panel id="main" mode="standard" main>
   <paper-toolbar mode="none">
     <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
     <span id="gui-title-bar" class="title">TEST : CONNECTING</span>
     <paper-spinner id="gui-status" active></paper-spinner>
   </paper-toolbar>
   <div size="fullScreen"><table width="100%" height="100%"><tr><th align="center">
    <h1 style="font-size:50px;">LOADING</h1>
    <paper-spinner style="width:75px;height:75px;margin:20px;" active></paper-spinner>
    <h2 style="font-size:25px;">Please Wait</h2>
   </th></tr></table></div>
  </paper-header-panel>
 </paper-drawer-panel>
 <paper-material id="drawer-fake" elevation="5">
  **FAKE DRAWER : DO NOT USE**
 </paper-material>
 <paper-toast-stack>
 </paper-toast-stack> 
</template>
<script type="text/javascript">
var app=document.querySelector("#ee-tv-gui");
var unix=parseInt(new Date().getTime()),start=1,tv_data="";
var scheme="http://",host="",hostlist=[],attempt=0,paths={"":"",
 "recordings":"/PVR/Records/getList?type=regular&avoidHD=0&tvOnly=0",
 "remote_keys":"/RemoteControl/KeyHandling/sendKey?avoidLongPress=1&key=",
 "channels":"/Live/Channels/getList?tvOnly=0&avoidHD=0&allowHidden=0&fields=name,id,zap,isDVB,hidden,rank,isHD,logo",
 "play_video":"/Live/External/play?position=0&url=", //PLAYS FROM INTERNET ON TV
 "play_recording":"/PVR/Records/play?recordId=", //PLAYS FROM PVR ON TV
 "get_download_session_id":"/PVR/Records/session?recordId=",
 "download_file_by_session_id":"/PVR/Records/getVideo?sessionId=",
 "find_programme":"/EPG/Programs/find?fieldName=name&fieldValue=", // &zap=
 "channel_logos":"/Live/Channels/getLogo?zap=",
 "cancel_timer":"/EPG/Timers/delete?timerId=",
 "timers":"/EPG/Timers/getConfig",
 "zap":"/Live/Channels/zap?zap=", //CHANGE TV CHANNEL
 "info":"/UPnP/Device/getInfo"
};

(function(global){

 console.log("FIRE");


})();
 
$(document).on("ready",function(){
 var menu=document.querySelector("paper-drawer-panel");

 //alert(menu.selected);

  menu.openDrawer=function(){this.selected='drawer';console.log("SHRINK TOAST");};
  menu.closeDrawer=function(){this.selected='main';console.log("STRETCH TOAST");};






  //$("head").append('<link rel="import" href="./custom/ee-recording.html"/>');


 console.log("READY");
});

window.import=function(obj){
 var base=document.querySelector("base[href]").href;
 var links=document.querySelectorAll("link[rel='import']");

 for(var l=0;l<=links.length;l++){
  if(l<links.length){
   console.log(links[l].href,links[l].href.indexOf(obj));

   //if(links[l].href.indexOf(obj)){

   //}

   continue;
  }

  console.log("NEW");
 }
};

function rel_to_abs(url){
 var base_url=document.querySelector("base[href]").href;
 if(base_url==""){base_url=location.href.match(/^(.+)\/?(?:#.+)?$/)[0]+"/";}
 if(url==undefined){alert("Invalid use of function.");return "url argument not found";}
 if(/^(https?|file|ftps?|mailto|javascript|data:image\/[^;]{2,9};):/i.test(url)){return url;}

    if(url.substring(0,2) == "//")
        return location.protocol + url;
    else if(url.charAt(0) == "/")
        return location.protocol + "//" + location.host + url;
    else if(url.substring(0,2) == "./")
        url = "." + url;
    else if(/^\s*$/.test(url))
        return ""; //Empty = Return nothing
    else url = "../" + url;


    url = base_url + url;
    var i=0
    while(/\/\.\.\//.test(url = url.replace(/[^\/]+\/+\.\.\//g,"")));

    /* Escape certain characters to prevent XSS */
  url=url.replace(/\.$/,"").replace(/\/\./g,"").replace(/"/g,"%22").replace(/'/g,"%27").replace(/</g,"%3C").replace(/>/g,"%3E");
 return url;
}
</script>
</body>
</html>
